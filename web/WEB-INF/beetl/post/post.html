@ layout("/common/_layout.html"){
    <div class="pull-left -main">
        <div>
            <h4>
                <span class="muted">话题：</span><a href="/topic/${topic.id!}">${topic.content!}</a>
                @ if(session.isAdminLogin!'' == 'true'){
                    <a href="/topic/edit/${topic.id}" class="btn btn-danger">编辑</a>
                @ }
            </h4>
        </div>
        @ for(v in postPage.list!){
            <div class="-main-border">
                <div class="muted -post-header">
                    <span>${ ((postPage.pageNumber - 1) * postPage.pageSize) + v_index + 1 } 楼 </span>
                    <p></p>
                    <span class="-post-header-date">${v.createdTime, dateFormat='yyyy-MM-dd'}</span>
                </div>
                <div class="-post-main">
                    <p>${v.content}</p>
                </div>
                <div class="-post-reply-form">
                    <p>
                        <span class="-edit-post-btn">
                            @ if(session.isAdminLogin!'' == 'true'){
                                <a href="/post/edit/${v.id!}" class="btn btn-danger">编辑</a>
                            @ }
                        </span>
                        <span class="-reply-success-info"><span class="alert alert-success hide">评论成功：)</span></span>
                        <span class="btn btn-info -show-reply-form-btn" onclick="showReplyForm(this)" title="显示/隐藏评论框">评论</span>
                    </p>
                    <form action="/" method="post">
                        <input type="hidden" name="reply.postID" value="${v.id}">
                        <input type="hidden" name="reply.topicID" value="${topic.id!}">
                        <span>昵称：</span>
                        <input type="text" name="reply.userName" placeholder="你的大名：)">
                        <span class="muted">必填，长度不超过10个字</span><br>
                        <span>评论：</span>
                        <textarea name="reply.content" cols="30" rows="3" placeholder="你的评论：)"></textarea>
                        <span class="muted">必填，长度不超过200字</span><br>
                        <input type="submit" value="提交评论" class="btn btn-info -reply-submit" onclick="return saveReply(this)">
                    </form>
                </div>
                <div class="-post-footer">
                    @ if(v.replyPage != null){
                        @ include("/reply/_ajaxReply.html", {"replyPage":v.replyPage, "postID":v.id}){}
                    @ }
                </div>
            </div>
        @ }
        <div class="_post_container">
            @ include("/common/_paginate.html", {"currentPage":postPage.pageNumber,"totalPage":postPage.totalPage,"actionUrl":"/post/" + topic.id! + "-"}) {}
            @ if(session.isAdminLogin!'' == 'true'){
                <div>
                    <form action="/post/save" method="post">
                        <p>回复内容：</p>
                        @ include("/common/_editer.html", {"textarea_name" : "post.content"}){}
                        <input type="hidden" name="post.topicID" value="${topic.id!}">
                        <br>
                        <input type="submit" class="btn btn-info" value="回复">
                    </form>
                </div>
            @ }
        </div>
    </div>
@ }